(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(1),s=t.n(r),c=t(17),a=t.n(c),o=(t(23),t(18)),u=t(8),i=t(3),l=t(5),d=t.n(l),b="/api/persons",j={getAll:function(){return d.a.get(b).then((function(e){return e.data}))},create:function(e){return d.a.post(b,e).then((function(e){return e.data}))},deletePerson:function(e){return d.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},update:function(e){return d.a.put("".concat(b,"/").concat(e.id),e).then((function(e){return e.data}))}},h=t(0),f={backgroundColor:"#b8b8b8",color:"red",padding:"15px",border:"3px solid red"},m=function(e){var n=e.id,t=e.name,r=e.number,s=e.setPersons,c=e.persons,a=e.setMessage,o=e.setMessageStyle;return Object(h.jsx)("div",{children:Object(h.jsxs)("p",{children:[" ",t," ",r," ",Object(h.jsxs)("button",{onClick:function(){return function(e,n,t,r,s,c){window.confirm("Delete ".concat(r,"?"))&&j.deletePerson(e).then((function(r){var s=t.filter((function(n){return n.id!==e}));n(s)})).catch((function(e){s("Information of ".concat(r," has already been removed from the server")),c(f),setTimeout((function(){return s(null)}),3e3)}))}(n,s,c,t,a,o)},children:[" ","delete"," "]})]},n)},n)},O=function(e){var n,t=e.persons,r=e.showAll,s=e.currentFilter,c=e.setPersons,a=e.setMessage,o=e.setMessageStyle;if(r)n=t.map((function(e){return Object(h.jsx)("div",{children:Object(h.jsx)(m,{id:e.id,name:e.name,number:e.number,setPersons:c,persons:t,setMessage:a,setMessageStyle:o},e.id)},e.id)}));else{var u=s.toLowerCase();n=t.filter((function(e){return e.name.toLowerCase().includes(u)})).map((function(e){return Object(h.jsx)("div",{children:Object(h.jsx)(m,{id:e.id,name:e.name,number:e.number,setPersons:c,persons:t,setMessage:a,setMessageStyle:o},e.id)},e.id)}))}return Object(h.jsxs)("div",{children:[" ",n]})},p=function(e){var n=e.message,t=e.styling;return null===n?null:Object(h.jsx)("div",{children:Object(h.jsx)("h2",{style:t,children:n})})},g={backgroundColor:"#b8b8b8",color:"green",padding:"15px",border:"3px solid green"},x=function(e){var n=e.newName,t=e.numberHandleChange,r=e.newNumber,s=e.submitEntry,c=e.nameHandleChange;return Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{onChange:c,value:n}),"number:",Object(h.jsx)("input",{onChange:t,value:r})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",onClick:s,children:"add"})})]})},v=function(e){e.showAll;var n=e.setshowAllText,t=(e.persons,e.currentFilter),r=e.setCurrentfilter;return Object(h.jsxs)("div",{children:[" ","filter shown with"," ",Object(h.jsx)("input",{value:t,onChange:function(e){r(e.target.value),""===e.target.value?n(!0):n(!1)}})]})},w=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],s=n[1],c=Object(r.useState)(""),a=Object(i.a)(c,2),l=a[0],d=a[1],b=Object(r.useState)(""),f=Object(i.a)(b,2),m=f[0],w=f[1],y=Object(r.useState)(""),C=Object(i.a)(y,2),S=C[0],M=C[1],k=Object(r.useState)(!0),A=Object(i.a)(k,2),P=A[0],N=A[1],E=Object(r.useState)(null),F=Object(i.a)(E,2),H=F[0],T=F[1],D=Object(r.useState)(g),I=Object(i.a)(D,2),J=I[0],L=I[1];Object(r.useEffect)((function(){return j.getAll().then((function(e){return s(e)}))}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(p,{message:H,styling:J}),Object(h.jsx)(v,{showAll:P,setshowAllText:N,persons:t,currentFilter:S,setCurrentfilter:M}),Object(h.jsx)("h2",{children:" add a "}),Object(h.jsx)(x,{newName:l,numberHandleChange:function(e){return w(e.target.value)},newNumber:m,submitEntry:function(e){if(e.preventDefault(),"undefined"!=typeof t.find((function(e){return e.name===l}))){if(window.confirm("".concat(l," is already added to the phonebook, replace the old number with a new one?"))){var n={id:t.find((function(e){return e.name===l})).id,name:l,number:m};j.update(n).then((function(e){var r=t.map((function(e){return e.id===n.id?Object(u.a)(Object(u.a)({},e),{},{number:n.number}):e}));s(r),d(""),w("")}))}}else{var r={id:0===t.length?1:t[t.length-1].id+1,name:l,number:m};j.create(r).then((function(e){s([].concat(Object(o.a)(t),[r])),d(""),w(""),T("Added ".concat(r.name)),setTimeout((function(){T(null)}),3e3)}))}},nameHandleChange:function(e){return d(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(O,{persons:t,showAll:P,currentFilter:S,setPersons:s,setMessage:T,setMessageStyle:L})]})};a.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.a7e18be9.chunk.js.map